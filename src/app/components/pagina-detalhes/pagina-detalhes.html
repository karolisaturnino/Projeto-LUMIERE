<div class="pagina-detalhes">
  <div *ngIf="carregando" class="carregando">
    Carregando...
  </div>

  <div *ngIf="!carregando && item" class="destaque">
    <div class="destaque-imagem">
      <img 
        [src]="obterUrlImagemGrande(item.backdrop_path)" 
        [alt]="eFilme(item) ? item.title : item.name"
        class="imagem-destaque">
      <div class="destaque-overlay"></div>
    </div>

    <div class="detalhes-container">
      <button class="btn-voltar" (click)="voltar()">‚Üê Voltar</button>
      
      
      <div class="detalhes-conteudo">
        <div class="poster-container">
          <img 
            [src]="obterUrlImagem(item.poster_path)" 
            [alt]="eFilme(item) ? item.title : item.name"
            class="poster">
        </div>

        <div class="informacoes-container">
          <div class="informacoes">
            <h1 class="titulo">{{ eFilme(item) ? item.title : item.name }}</h1>
            <button class="btn-add-lista" (click)="adicionarNaLista()">
    ‚ûï Adicionar √† Minha Lista
  </button>
            
            <div class="nota-container">
              <div class="nota">
                <span class="nota-valor">{{ item.vote_average | number:'1.1-1' }}</span>
                <span class="nota-max">/10</span>
              </div>
              <span class="votos">({{ item.vote_count }} votos)</span>
            </div>

            <div class="metadados">
              <div class="metadado" *ngIf="eFilme(item) && item.release_date">
                <strong>Data de Lan√ßamento:</strong>
                <span>{{ item.release_date | date:'dd/MM/yyyy' }}</span>
              </div>
              <div class="metadado" *ngIf="eSerie(item) && item.first_air_date">
                <strong>Primeira Exibi√ß√£o:</strong>
                <span>{{ item.first_air_date | date:'dd/MM/yyyy' }}</span>
              </div>
              
              <div class="metadado" *ngIf="eFilme(item) && item.runtime">
                <strong>Dura√ß√£o:</strong>
                <span>{{ item.runtime }} minutos</span>
              </div>
              
              <div class="metadado" *ngIf="eSerie(item) && item.number_of_seasons">
                <strong>Temporadas:</strong>
                <span>{{ item.number_of_seasons }}</span>
              </div>
              
              <div class="metadado" *ngIf="eSerie(item) && item.number_of_episodes">
                <strong>Epis√≥dios:</strong>
                <span>{{ item.number_of_episodes }}</span>
              </div>
            </div>

            <div class="generos" *ngIf="item.genres && item.genres.length > 0">
              <strong>G√™neros:</strong>
              <div class="generos-lista">
                <span *ngFor="let genero of item.genres" class="genero">
                  {{ genero.name }}
                </span>
              </div>
            </div>

            <div class="sinopse" *ngIf="item.overview">
              <h3>Sinopse</h3>
              <p>{{ item.overview }}</p>
            </div>
          

            <div class="produtoras" *ngIf="item.production_companies && item.production_companies.length > 0">
              <strong>Produtoras:</strong>
              <div class="produtoras-lista">
                <span *ngFor="let produtora of item.production_companies" class="produtora">
                  {{ produtora.name }}
                </span>
              </div>
                <!-- ============================= -->
<!--        COMENT√ÅRIOS           -->
<!-- ============================= -->

<div class="comentarios-container">

  <h2>Coment√°rios & Avalia√ß√µes ‚≠ê</h2>

  <!-- Lista de coment√°rios -->
  <div *ngIf="comentarios.length > 0; else semComentarios">

    <div class="comentario" *ngFor="let c of comentarios">
      <div class="comentario-header">
        <strong>Nota: {{ c.nota }}/10</strong>
        <span class="data">{{ c.data }}</span>
      </div>
      <p>{{ c.texto }}</p>
    </div>

  </div>

  <!-- Quando n√£o houver coment√°rios -->
  <ng-template #semComentarios>
    <p class="sem-comentarios">Nenhum coment√°rio ainda. Seja o primeiro! üòÑ</p>
  </ng-template>

  <!-- Formul√°rio para novo coment√°rio -->
  <div class="novo-comentario">

    <label>Seu coment√°rio:</label>
    <textarea [(ngModel)]="novoComentario" placeholder="Escreva aqui..."></textarea>

    <label>Sua Nota:</label>

<div class="estrelas">
  <span *ngFor="let estrela of [1,2,3,4,5,6,7,8,9,10]"
        (click)="selecionarNota(estrela)"
        [class.selecionada]="estrela <= novaNota">‚òÖ</span>
</div>

    <button (click)="adicionarComentario()">Enviar</button>
  </div>

</div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>